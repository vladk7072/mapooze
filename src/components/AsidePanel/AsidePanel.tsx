//@ts-ignore
import logo from "../../assets/images/asidepanel/logo.svg";
//@ts-ignore
import chatIcon from "../../assets/images/asidepanel/chat-icon.svg";
import { FC, useEffect, useState } from "react";
import { Link, NavLink } from "react-router-dom";
import { AsideType } from "../../types/AsideTypes";
import { mainSlice } from "../../store/slices/main.slice";
import { useAppDispatch, useAppSelector } from "../../hooks/redux-hooks";
import { asidePanelSlice } from "../../store/slices/asidePanel.slice";
import { Header } from "./components/Header";
import { MobTheme } from "./components/MobTheme";
import { MenuButtons } from "./components/MenuButtons";
import { AsideProfile } from "./components/AsideProfile";

export const AsidePanel: FC = () => {
  const { isDarkTheme } = useAppSelector((state) => state.mainPanelReducer);
  const { isOpenAside } = useAppSelector((state) => state.asidePanelReducer);
  const { setDarkTheme } = mainSlice.actions;
  const { setVisibleAside, checkMobileAside } = asidePanelSlice.actions;
  const dispatch = useAppDispatch();

  // оброботчик состояние закрыто или открыто боковое меню
  const openAsideHandler = () => {
    dispatch(setVisibleAside());
  };

  return (
    <>
      <Header />
      {/* this component visible only before 768px */}
      <MobTheme />
      <NavLink
        className="asidepanel__chat asidepanel__chat-mob"
        to="chat"
        onClick={() => dispatch(checkMobileAside())}
      >
        <div className="asidepanel__chat-link">
          <img src={chatIcon} alt="" />
        </div>
      </NavLink>
      <div
        className={isOpenAside ? "asidepanel asidepanel--active" : "asidepanel"}
      >
        <div
          onClick={() => openAsideHandler()}
          className={
            isOpenAside
              ? "asidepanel__control asidepanel__control--active"
              : "asidepanel__control"
          }
        >
          <span></span>
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11 21C16.5228 21 21 16.5228 21 11C21 5.47715 16.5228 1 11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21Z"
              fill="white"
              stroke="#29ABE2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>
        </div>
        <Link className="asidepanel__logo" to="/">
          <img src={logo} alt="" />
        </Link>
        <MenuButtons />
        <AsideProfile />
        <NavLink className="asidepanel__chat" to="chat">
          <div className="asidepanel__chat-link">
            <img src={chatIcon} alt="" />
          </div>
        </NavLink>
        <NavLink
          className="asidepanel__settings"
          to="settings"
          onClick={() => dispatch(checkMobileAside())}
        >
          <div className="asidepanel__settings-btn">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clipPath="url(#clip0_390_8730)">
                <path
                  d="M12.0666 7.33301C9.46657 7.33301 7.3999 9.39967 7.3999 11.9997C7.3999 14.5997 9.46657 16.6663 12.0666 16.6663C14.6666 16.6663 16.7332 14.5997 16.7332 11.9997C16.7332 9.39967 14.6666 7.33301 12.0666 7.33301ZM12.0666 15.333C10.1999 15.333 8.73324 13.8663 8.73324 11.9997C8.73324 10.133 10.1999 8.66634 12.0666 8.66634C13.9332 8.66634 15.3999 10.133 15.3999 11.9997C15.3999 13.8663 13.9332 15.333 12.0666 15.333Z"
                  fill="#8A97AA"
                />
                <path
                  d="M21.8668 9.79967L20.0002 9.19967L19.6002 8.19967L20.5335 6.46634C20.7335 6.06634 20.6668 5.53301 20.3335 5.19967L18.7335 3.59967C18.4002 3.26634 17.8668 3.19967 17.4668 3.39967L15.7335 4.33301L14.7335 3.93301L14.1335 2.06634C14.0002 1.66634 13.6002 1.33301 13.1335 1.33301H10.8668C10.4002 1.33301 10.0002 1.66634 9.9335 2.13301L9.3335 3.99967C8.9335 4.06634 8.60016 4.19967 8.26683 4.39967L6.5335 3.46634C6.1335 3.26634 5.60016 3.33301 5.26683 3.66634L3.66683 5.26634C3.3335 5.59967 3.26683 6.13301 3.46683 6.53301L4.3335 8.19967C4.20016 8.53301 4.06683 8.93301 3.9335 9.26634L2.06683 9.86634C1.66683 9.99967 1.3335 10.3997 1.3335 10.8663V13.133C1.3335 13.5997 1.66683 13.9997 2.1335 14.133L4.00016 14.733L4.40016 15.733L3.46683 17.4663C3.26683 17.8663 3.3335 18.3997 3.66683 18.733L5.26683 20.333C5.60016 20.6663 6.1335 20.733 6.5335 20.533L8.26683 19.5997L9.26683 19.9997L9.86683 21.933C10.0002 22.333 10.4002 22.6663 10.8668 22.6663H13.1335C13.6002 22.6663 14.0002 22.333 14.1335 21.933L14.7335 19.9997L15.7335 19.5997L17.4668 20.533C17.8668 20.733 18.4002 20.6663 18.7335 20.333L20.3335 18.733C20.6668 18.3997 20.7335 17.8663 20.5335 17.4663L19.6002 15.733L20.0002 14.733L21.9335 14.133C22.3335 13.9997 22.6668 13.5997 22.6668 13.133V10.8663C22.6668 10.3997 22.3335 9.93301 21.8668 9.79967ZM21.3335 12.933L18.9335 13.6663L18.8668 13.9997L18.2668 15.3997L18.0668 15.733L19.2668 17.933L17.9335 19.2663L15.7335 18.0663L15.4002 18.2663C14.9335 18.533 14.4668 18.733 14.0002 18.8663L13.6668 18.933L12.9335 21.333H11.0668L10.3335 18.933L10.0002 18.8663L8.60016 18.2663L8.26683 18.0663L6.06683 19.2663L4.7335 17.933L5.9335 15.733L5.7335 15.3997C5.46683 14.933 5.26683 14.4663 5.1335 13.9997L5.06683 13.6663L2.66683 12.933V11.0663L4.9335 10.3997L5.06683 10.0663C5.20016 9.53301 5.40016 9.06634 5.66683 8.59967L5.86683 8.26634L4.7335 6.06634L6.06683 4.73301L8.20016 5.93301L8.5335 5.73301C9.00016 5.46634 9.46683 5.26634 10.0002 5.13301L10.3335 4.99967L11.0668 2.66634H12.9335L13.6668 4.99967L14.0002 5.13301C14.4668 5.26634 14.9335 5.46634 15.4002 5.73301L15.7335 5.93301L17.9335 4.73301L19.2668 6.06634L18.0668 8.26634L18.2668 8.59967C18.5335 9.06634 18.7335 9.53301 18.8668 9.99967L18.9335 10.333L21.3335 11.0663V12.933Z"
                  fill="#8A97AA"
                />
              </g>
              <defs>
                <clipPath id="clip0_390_8730">
                  <rect width="24" height="24" fill="white" />
                </clipPath>
              </defs>
            </svg>
          </div>
        </NavLink>
        <div className="asidepanel__theme">
          <div
            className="asidepanel__theme-btn"
            onClick={() => dispatch(setDarkTheme())}
          >
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M31.9744 17.1781C31.7792 20.5685 30.4919 23.8046 28.305 26.4028C26.1181 29.0009 23.149 30.8214 19.8416 31.5923C16.5343 32.3631 13.0663 32.0427 9.95604 30.6791C6.84582 29.3156 4.26047 26.982 2.58646 24.0272C2.53482 23.9323 2.5127 23.8241 2.52296 23.7165C2.53321 23.6089 2.57537 23.5069 2.64402 23.4234C2.71267 23.34 2.80469 23.2789 2.90827 23.2481C3.01186 23.2173 3.12228 23.2181 3.22538 23.2505C6.01148 24.0542 8.96548 24.0725 11.7613 23.3033C14.5571 22.5341 17.086 21.0073 19.0689 18.8915C21.0517 16.7756 22.4113 14.1531 22.9977 11.3133C23.5841 8.47347 23.3744 5.52687 22.3918 2.79873C22.3539 2.69803 22.3468 2.58835 22.3714 2.48363C22.3961 2.37891 22.4513 2.28388 22.5301 2.21062C22.6089 2.13736 22.7076 2.08918 22.8139 2.07222C22.9201 2.05525 23.029 2.07026 23.1267 2.11534C25.9257 3.46973 28.2602 5.62368 29.8351 8.30482C31.4099 10.986 32.1544 14.0739 31.9744 17.1781Z"
                fill={isDarkTheme ? "#29ABE2" : "#8A97AA"}
              />
              <path
                d="M10.3051 15.7293C13.3005 15.7293 15.7288 13.301 15.7288 10.3056C15.7288 7.31012 13.3005 4.88184 10.3051 4.88184C7.30963 4.88184 4.88135 7.31012 4.88135 10.3056C4.88135 13.301 7.30963 15.7293 10.3051 15.7293Z"
                fill={isDarkTheme ? "#8A97AA" : "#29ABE2"}
              />
              <path
                d="M7.05067 10.8478C6.90683 10.8478 6.76887 10.7906 6.66716 10.6889C6.56544 10.5872 6.5083 10.4492 6.5083 10.3054C6.50945 9.29883 6.90982 8.33381 7.62157 7.62206C8.33332 6.91031 9.29834 6.50994 10.3049 6.50879C10.4488 6.50879 10.5867 6.56593 10.6884 6.66765C10.7901 6.76936 10.8473 6.90732 10.8473 7.05116C10.8473 7.19501 10.7901 7.33296 10.6884 7.43468C10.5867 7.53639 10.4488 7.59353 10.3049 7.59353C9.58594 7.5944 8.89667 7.88039 8.38828 8.38877C7.8799 8.89716 7.59391 9.58643 7.59305 10.3054C7.59305 10.4492 7.5359 10.5872 7.43419 10.6889C7.33247 10.7906 7.19452 10.8478 7.05067 10.8478Z"
                fill="white"
              />
              <path
                d="M10.3051 3.25424C10.1612 3.25424 10.0233 3.19709 9.92157 3.09538C9.81985 2.99367 9.76271 2.85571 9.76271 2.71186V0.542373C9.76271 0.398527 9.81985 0.260572 9.92157 0.158857C10.0233 0.0571427 10.1612 0 10.3051 0C10.4489 0 10.5869 0.0571427 10.6886 0.158857C10.7903 0.260572 10.8475 0.398527 10.8475 0.542373V2.71186C10.8475 2.85571 10.7903 2.99367 10.6886 3.09538C10.5869 3.19709 10.4489 3.25424 10.3051 3.25424ZM10.3051 20.6102C10.1612 20.6102 10.0233 20.553 9.92157 20.4513C9.81985 20.3496 9.76271 20.2116 9.76271 20.0678V17.8983C9.76271 17.7545 9.81985 17.6165 9.92157 17.5148C10.0233 17.4131 10.1612 17.3559 10.3051 17.3559C10.4489 17.3559 10.5869 17.4131 10.6886 17.5148C10.7903 17.6165 10.8475 17.7545 10.8475 17.8983V20.0678C10.8475 20.2116 10.7903 20.3496 10.6886 20.4513C10.5869 20.553 10.4489 20.6102 10.3051 20.6102ZM20.0678 10.8475H17.8983C17.7545 10.8475 17.6165 10.7903 17.5148 10.6886C17.4131 10.5869 17.3559 10.4489 17.3559 10.3051C17.3559 10.1612 17.4131 10.0233 17.5148 9.92157C17.6165 9.81985 17.7545 9.76271 17.8983 9.76271H20.0678C20.2116 9.76271 20.3496 9.81985 20.4513 9.92157C20.553 10.0233 20.6102 10.1612 20.6102 10.3051C20.6102 10.4489 20.553 10.5869 20.4513 10.6886C20.3496 10.7903 20.2116 10.8475 20.0678 10.8475ZM2.71186 10.8475H0.542373C0.398527 10.8475 0.260572 10.7903 0.158857 10.6886C0.0571427 10.5869 0 10.4489 0 10.3051C0 10.1612 0.0571427 10.0233 0.158857 9.92157C0.260572 9.81985 0.398527 9.76271 0.542373 9.76271H2.71186C2.85571 9.76271 2.99367 9.81985 3.09538 9.92157C3.19709 10.0233 3.25424 10.1612 3.25424 10.3051C3.25424 10.4489 3.19709 10.5869 3.09538 10.6886C2.99367 10.7903 2.85571 10.8475 2.71186 10.8475ZM4.93559 5.47797C4.79176 5.47794 4.65383 5.42077 4.55214 5.31905L3.01831 3.78522C2.91951 3.68293 2.86484 3.54592 2.86608 3.40371C2.86731 3.26151 2.92435 3.12547 3.02491 3.02491C3.12547 2.92435 3.26151 2.86731 3.40371 2.86608C3.54592 2.86484 3.68293 2.91951 3.78522 3.01831L5.31959 4.55268C5.39527 4.62859 5.44675 4.72522 5.46755 4.83038C5.48834 4.93553 5.47751 5.04449 5.43643 5.14349C5.39534 5.24249 5.32584 5.3271 5.2367 5.38663C5.14756 5.44616 5.04278 5.47794 4.93559 5.47797ZM17.2084 17.7508C17.0646 17.7507 16.9266 17.6936 16.8249 17.5919L15.2906 16.0575C15.1918 15.9552 15.1371 15.8182 15.1383 15.676C15.1396 15.5338 15.1966 15.3977 15.2972 15.2972C15.3977 15.1966 15.5338 15.1396 15.676 15.1383C15.8182 15.1371 15.9552 15.1918 16.0575 15.2906L17.5919 16.8249C17.6677 16.9008 17.7193 16.9974 17.7402 17.1026C17.7612 17.2078 17.7504 17.3169 17.7094 17.4159C17.6683 17.515 17.5988 17.5997 17.5097 17.6593C17.4205 17.7189 17.3157 17.7508 17.2084 17.7508ZM15.6746 5.47797C15.5673 5.47794 15.4625 5.44612 15.3733 5.38652C15.2841 5.32692 15.2146 5.24223 15.1736 5.14313C15.1326 5.04404 15.1218 4.93501 15.1427 4.82981C15.1637 4.72462 15.2153 4.62799 15.2911 4.55214L16.8255 3.01776C16.8755 2.96596 16.9354 2.92464 17.0015 2.89622C17.0677 2.86779 17.1389 2.85283 17.2109 2.8522C17.2829 2.85158 17.3543 2.8653 17.421 2.89257C17.4876 2.91984 17.5482 2.96012 17.5991 3.01104C17.6501 3.06196 17.6903 3.12252 17.7176 3.18918C17.7449 3.25583 17.7586 3.32725 17.758 3.39927C17.7573 3.47128 17.7424 3.54245 17.714 3.60863C17.6855 3.6748 17.6442 3.73465 17.5924 3.78468L16.0575 5.31959C15.9558 5.42098 15.8181 5.47794 15.6746 5.47797ZM3.40176 17.7508C3.29451 17.7508 3.18967 17.7189 3.1005 17.6593C3.01133 17.5997 2.94183 17.515 2.90078 17.4159C2.85974 17.3169 2.849 17.2078 2.86992 17.1026C2.89084 16.9974 2.94248 16.9008 3.01831 16.8249L4.55268 15.2906C4.65497 15.1918 4.79198 15.1371 4.93418 15.1383C5.07639 15.1396 5.21243 15.1966 5.31299 15.2972C5.41355 15.3977 5.47059 15.5338 5.47182 15.676C5.47306 15.8182 5.41839 15.9552 5.31959 16.0575L3.78522 17.5919C3.68353 17.6936 3.5456 17.7507 3.40176 17.7508Z"
                fill={isDarkTheme ? "#8A97AA" : "#29ABE2"}
              />
            </svg>
          </div>
        </div>
      </div>
    </>
  );
};
